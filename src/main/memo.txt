--여러개 이미지 넣는 게 필요한 테이블에서 게시글 이미지 번호 가져오는 컬럼 : postimgnum(postimg num 들 가져오는 칼럼)

--세영님 파트
--기본 유저 시퀀스
--nocache 장점 : 버퍼 메모리 절약; 단점 : CPU 과도한 사용;
drop sequence userseq;
create sequence userseq
  increment by 1
  start with 1
  minvalue 1
  maxvalue 10000
  nocache;

--기본 유저 테이블
drop table users cascade constraints;
create table users(
  num number primary key,
  ucode varchar2(20) not null,
  id varchar2(20) unique not null,
  pw varchar2(20) not null,
  name varchar2(40) not null,
  gender varchar2(10) not null,
  email varchar2(30) unique not null,
  birth date default sysdate,
  postcode number,
  address1 varchar2(50), --주소 4개로(다른 테이블 참고)
  address2 varchar2(50),
  phone varchar2(20) not null,
  regidate date default sysdate, --승민님이랑 관형님 걸로 바꾸기 (세영, 현선)
  editdate date default sysdate,
  editor varchar2(20),
  status varchar2(50) not null
);
comment on table users is '사용자 정보';
comment on column users.num is '레코드 번호';
comment on column users.ucode is '사용자 구분(admin:관리자/business:사업자/customer:개인회원)';
comment on column users.id is '아이디';
comment on column users.pw is '비밀번호';
comment on column users.name is '관리자, 사업체 이름, 개인회원 실명';
gender
comment on column users.email is '이메일 주소';
comment on column users.birth is '사이트시작일, 사업시작일, 개인회원 생일';
comment on column users.zipcode is '우편번호';
comment on column users.address1 is '주소 대분류';
comment on column users.address2 is '주소 소분류';
comment on column users.phone is '번호';
comment on column users.regidate is '회원가입일';
comment on column users.editdate is '수정일자';
comment on column users.editor is '수정한 사람';
comment on column users.status is '회원상태';


--개인(결제수단) 시퀀스
drop sequence payseq;
create sequence payseq
  increment by 1
  start with 1
  minvalue 1
  maxvalue 10000
  nocache;

--개인(결제수단) 테이블
drop table pay cascade constraints;
create table pay(
  num number primary key,
  id varchar2(20) not null,
  paycode varchar2(20) not null,
  paydetail varchar2(20),
  --cvc 코드
  regidate date default sysdate,
  editdate date default sysdate,
  foreign key(id) references users(id)
);
comment on table pay is '결제수단 등록 테이블';
comment on column pay.num is '레코드 번호';
comment on column pay.id is '사용자 아이디 - 부모 users';
comment on column pay.paycode is '결제수단 구분';
comment on column pay.paydetail is '결제수단 상세 정보(카드 번호 등)';


--관리자(공지사항) 시퀀스
drop sequence noticeseq;
create sequence noticeseq
  increment by 1
  start with 1
  minvalue 1
  maxvalue 10000
  nocache;

--관리자(공지사항) 테이블
drop table notice cascade constraints;
create table notice(
  num number primary key,
  id varchar2(20) not null,
  title varchar(200) not null,
  contents clob not null,
  uploaddate date default sysdate,
  editdate date default sysdate,
  editor varchar2(20) not null,
  readcount number default 0,
  foreign key(id) references users(id)
);
comment on table notice is '공지사항 테이블';
comment on column notice.num is '레코드 번호';
comment on column notice.id is '사용자 아이디 - 부모 users';
comment on column notice.title is '게시글 제목';
comment on column notice.content is '게시글 내용';
comment on column notice.uploaddate is '게시글 올린 날짜';
comment on column notice.readcount is '게시글 조회수';


--관리자(이벤트) 시퀀스
drop sequence eventseq;
create sequence eventseq
  increment by 1
  start with 1
  minvalue 1
  maxvalue 10000
  nocache;

--관리자(이벤트) 테이블
drop table event cascade constraints;
create table event(
  num number primary key,
  id varchar2(20) not null,
  title varchar(200) not null,
  contents clob not null,
  uploaddate date default sysdate,
  editdate date default sysdate,
  editor varchar2(20) not null,
  startdate date default sysdate,
  enddate date default sysdate,
  readcount number default 0,
  foreign key(id) references users(id)
);
comment on table event is '이벤트 테이블';
comment on column event.num is '레코드 번호';
comment on column event.id is '사용자 아이디 - 부모 users';
comment on column event.title is '게시글 제목';
comment on column event.content is '게시글 내용';
comment on column event.uploaddate is '게시글 올린 날짜';
comment on column event.startdate is '이벤트 시작 날짜';
comment on column event.startdate is '이벤트 끝 날짜';
comment on column event.readcount is '게시글 조회수';


--관리자+사용자+사업자(문의 게시판) 시퀀스
drop sequence qnaseq;
create sequence qnaseq
  increment by 1
  start with 1
  minvalue 1
  maxvalue 10000
  nocache;
  
--관리자+사용자+사업자(문의 게시판) 테이블
drop table qna cascade constraints;
create table qna(
  num number primary key,
  id varchar2(20) not null,
  pw varchar2(20),
  title varchar(200) not null,
  contents clob not null,
  keyword varchar2(100),
  uploaddate date default sysdate,
  editdate date default sysdate,
  editor varchar2(20) not null,
  status varchar2(50),
  ref number not null,
  restep number not null,
  relevel number not null,
  foreign key(id) references users(id)
);
comment on table qna is '문의 게시판 테이블';
comment on column qna.num is '레코드 번호';
comment on column qna.pw is '게시글 비밀번호';
comment on column qna.title is '게시글 제목';
comment on column qna.content is '게시글 내용';
comment on column qna.keyword is '문의글 키워드';
comment on column qna.uploaddate is '게시글 올린 날짜';
comment on column qna.editdate is '게시글 수정일자';
comment on column qna.editor is '게시글 수정자';
comment on column qna.status is '답변 여부';
comment on column qna.ref is 'num 칼럼값. 부모글 체크';
comment on column qna.restep is '원본에 답글 달린 갯수';
comment on column qna.relevel is '답글의 답글 등 판별';


--관리자+사업자+개인(게시글 이미지) 시퀀스
drop sequence postimgseq;
create sequence postimgseq
  increment by 1
  start with 1
  minvalue 1
  maxvalue 10000
  nocache;
  
--관리자+사업자+개인(게시글 이미지) 테이블
drop table postimg cascade constraints;
create table postimg(
  num number primary key,
  postcode varchar2(20) not null, --articlecode???? 정해서 일단 카톡방에 물어보고 수정
  postnum number not null, --이름 위에 거랑 비슷하게
  imgname varchar2(40),
  imgraw varchar2(500) not null,
  uploaddate date default sysdate,
  uploader varchar2(20) not null,
  editdate date default sysdate,
  editor varchar2(20) not null
);
comment on table postimg is '게시글 이미지 테이블';
comment on column postimg.num is '레코드 번호';
comment on column postimg.postcode is '게시글 구분코드(1:공지사항/2:이벤트/3:문의게시판/4:캠핑/5:관광지/6:커뮤니티)';
comment on column postimg.postnum is '+번호(해당 테이블 레코드 번호)';
comment on column postimg.imgname is '이미지 이름';
comment on column postimg.imgraw is '이미지 raw file';


--개인(찜/관심목록) 시퀀스
drop sequence likeseq;
create sequence likeseq
  increment by 1
  start with 1
  minvalue 1
  maxvalue 10000
  nocache;
  
--개인(찜/관심목록) 테이블 : 숙소, 관광지, 커뮤니티
drop table likes cascade constraints;
create table likes(
  num number primary key,
  id varchar2(20) not null,
  postcode varchar2(20) not null, --이름변경
  postnum number not null, --변경
  likedate date default sysdate,
  foreign key(id) references users(id)
);
comment on table likes is '찜/관심목록 테이블';
comment on column likes.num is '레코드 번호';
comment on column likes.id is '사용자 아이디 - 부모 users';
comment on column likes.postcode is '게시글 구분코드(1:캠핑/2:관광지/3:커뮤니티)';
comment on column likes.postnum is '+번호(해당 테이블 레코드 번호)';
comment on column likes.likedate is '찜한 날짜';










-------------------------------------------------------------------
--관형님 파트

DROP SEQUENCE TOUR_SEQ;
CREATE SEQUENCE TOUR_SEQ
	INCREMENT BY 1
	START WITH 1
	MINVALUE 1
	MAXVALUE 10000
	NOCACHE;

DROP TABLE TOURLIST;
CREATE TABLE CAMPING( --테이블 이름 변경
	NUM NUMBER PRIMARY KEY,
	NAME VARCHAR2(100) UNIQUE NOT NULL,
	THEMECODE VARCHAR2(100) NOT NULL,
	PRICE NUMBER,
	DISCOUNT VARCHAR2(30),
	POINT NUMBER, --아쉽지만 제거
	TAG VARCHAR2(200) NOT NULL,
	SUMMARY VARCHAR2(200),
	IMGURL VARCHAR2(200),
	INTRODUCTION CLOB, --contents로 변경
	POSTCODE VARCHAR2(15),
	ADDRESS1 VARCHAR2(150) NOT NULL,
	ADDRESS2 VARCHAR2(150) NOT NULL,
	ADDRESS3 VARCHAR2(150) NOT NULL,
	ADDRESS4 VARCHAR2(150) NOT NULL,
	LATITUDE VARCHAR2(100) NOT NULL,
	LONGITUDE VARCHAR2(100) NOT NULL,
	CONTACT VARCHAR2(30) NOT NULL,
	REGDATE DATE DEFAULT SYSDATE,
	REGID VARCHAR2(50) NOT NULL,
	MODDATE DATE DEFAULT SYSDATE,
	MODID VARCHAR2(50) NOT NULL,
	READCOUNT NUMBER DEFAULT 0,
	UPCOUNT NUMBER DEFAULT 0,
	LIKECOUNT NUMBER DEFAULT 0,
	REVIEWCOUNT NUMBER DEFAULT 0,
	STARSCORE NUMBER DEFAULT 0 --삭제
);

COMMENT ON TABLE TOURLIST IS '관광지 테이블';
COMMENT ON COLUMN TOURLIST.NUM IS '관광지 고유번호';
COMMENT ON COLUMN TOURLIST.NAME IS '관광지 이름';
COMMENT ON COLUMN TOURLIST.THEMECODE IS '관광지 테마(숲/해변/호수,계곡/도심/섬)';
COMMENT ON COLUMN TOURLIST.PRICE IS '관광지 가격';
COMMENT ON COLUMN TOURLIST.DISCOUNT IS '관광지 할인가';
COMMENT ON COLUMN TOURLIST.POINT IS '관광지 포인트';
COMMENT ON COLUMN TOURLIST.TAG IS '태그(#)';
COMMENT ON COLUMN TOURLIST.SUMMARY IS '관광지 한줄 요약';
COMMENT ON COLUMN TOURLIST.IMGURL IS '관광지 대표이미지';
COMMENT ON COLUMN TOURLIST.INTRODUCTION IS '관광지 소개글';
COMMENT ON COLUMN TOURLIST.POSTCODE IS '우편번호';
COMMENT ON COLUMN TOURLIST.ADDRESS1 IS '관광지주소1(시)';
COMMENT ON COLUMN TOURLIST.ADDRESS2 IS '관광지주소2(군구)';
COMMENT ON COLUMN TOURLIST.ADDRESS3 IS '관광지주소3(동길)';
COMMENT ON COLUMN TOURLIST.ADDRESS4 IS '관광지주소4(상세주소)';
COMMENT ON COLUMN TOURLIST.LATITUDE IS '관광지위도';
COMMENT ON COLUMN TOURLIST.LONGITUDE IS '관광지경도';
COMMENT ON COLUMN TOURLIST.CONTACT IS '관광지연락처';
COMMENT ON COLUMN TOURLIST.REGDATE IS '관광지 등록일';
COMMENT ON COLUMN TOURLIST.REGID IS '관광지 등록자id';
COMMENT ON COLUMN TOURLIST.MODDATE IS '관광지 수정일';
COMMENT ON COLUMN TOURLIST.MODID IS '관광지 수정자id';
COMMENT ON COLUMN TOURLIST.READCOUNT IS '관광지 조회수';
COMMENT ON COLUMN TOURLIST.UPCOUNT IS '관광지 추천수';
COMMENT ON COLUMN TOURLIST.LIKECOUNT IS '관광지 찜갯수';
COMMENT ON COLUMN TOURLIST.REVIEWCOUNT IS '관광지 리뷰수';
COMMENT ON COLUMN TOURLIST.STARSCORE IS '관광지 평균별점';









-------------------------------------------------------------------------
--현선님 파트
-- 커뮤니티테이블
DROP TABLE COMMUNITY;

CREATE TABLE COMMUNITY ( 
   NUM NUMBER NOT NULL PRIMARY KEY,
   REVIEW_NUM NUMBER NOT NULL,
   REVIEW_TYPE VARCHAR2(2) NOT NULL,
   IMGURL VARCHAR2(60) NOT NULL,
   TITLE VARCHAR2(200) NOT NULL,
   SUMMARY VARCHAR2(200) NOT NULL,
   CONTENTS CLOB,
   HITS NUMBER DEFAULT '0' NULL, --readcount로 이름 변경
   RECOMMEND NUMBER DEFAULT '0' NULL,
   STEAMED  NUMBER DEFAULT '0' NULL, --like table 이름 바꾸기
   STAR_RANKING  NUMBER DEFAULT '0' NULL,
   REG_KEYWORD VARCHAR2(600) DEFAULT NULL, --다른사람들 이걸로 변경
   STATUS VARCHAR2(2) DEFAULT '01' NOT NULL,
   REG_ID VARCHAR2(45) NULL ,
   REG_DATE DATE DEFAULT SYSDATE NULL ,
   MOD_ID VARCHAR2(45) NULL,
   MOD_DATE DATE NULL 
);

COMMENT ON TABLE COMMUNITY IS '커뮤니티테이블';
COMMENT ON COLUMN COMMUNITY.NUM IS '커뮤니티 고유번호';
COMMENT ON COLUMN COMMUNITY.REVIEW_NUM IS '후기 번호(캠핑/글램핑번호 or 관광지번호)';
COMMENT ON COLUMN COMMUNITY.REVIEW_TYPE IS '후기구분값(01:캠핑/글램핑후기, 02:관광지후기) ';
COMMENT ON COLUMN COMMUNITY.IMGURL IS '대표이미지 파일명';
COMMENT ON COLUMN COMMUNITY.TITLE IS '제목';
COMMENT ON COLUMN COMMUNITY.SUMMARY IS '한줄요약';
COMMENT ON COLUMN COMMUNITY.CONTENTS IS '내용';
COMMENT ON COLUMN COMMUNITY.HITS IS '조회수';
COMMENT ON COLUMN COMMUNITY.RECOMMEND IS '추천수(좋아요)';
COMMENT ON COLUMN COMMUNITY.STEAMED IS '찜수';
COMMENT ON COLUMN COMMUNITY.STAR_RANKING IS '별등급';
COMMENT ON COLUMN COMMUNITY.REG_KEYWORD IS '등록키워드';
COMMENT ON COLUMN COMMUNITY.STATUS IS '커뮤니티상태값(01:노출/02:비노출)';
COMMENT ON COLUMN COMMUNITY.REG_ID IS '등록아이디';
COMMENT ON COLUMN COMMUNITY.REG_DATE IS '등록날짜';
COMMENT ON COLUMN COMMUNITY.MOD_ID IS '수정아이디';
COMMENT ON COLUMN COMMUNITY.MOD_DATE IS '수정날짜';

DROP SEQUENCE COMMUNITY_SEQ;
CREATE SEQUENCE COMMUNITY_SEQ
  INCREMENT BY 1
  START WITH 1
  MINVALUE 1
  MAXVALUE 10000
  NOCACHE;
  
--------------------------------------------------

-- 댓글테이블

DROP TABLE REPLY;

CREATE TABLE REPLY ( 
   NUM NUMBER NOT NULL PRIMARY KEY,
   REVIEW_NUM NUMBER NOT NULL,
   REVIEW_TYPE VARCHAR2(2) NOT NULL,
   CONTENTS CLOB, --varchar2()로 변경
   REG_ID VARCHAR2(45) NULL , ----
   REG_DATE DATE DEFAULT SYSDATE NULL -------
);

COMMENT ON TABLE REPLY IS '댓글 테이블';
COMMENT ON COLUMN REPLY.NUM IS '댓글 고유번호';
COMMENT ON COLUMN REPLY.REVIEW_NUM IS '후기 번호(캠핑/글램핑번호 or 관광지번호)';
COMMENT ON COLUMN REPLY.REVIEW_TYPE IS '후기구분값(01:캠핑/글램핑후기, 02:관광지후기) ';
COMMENT ON COLUMN REPLY.CONTENTS IS '내용';
COMMENT ON COLUMN REPLY.REG_ID IS '등록아이디';
COMMENT ON COLUMN REPLY.REG_DATE IS '등록날짜';

DROP SEQUENCE REPLY_SEQ;
CREATE SEQUENCE REPLY_SEQ
  INCREMENT BY 1
  START WITH 1
  MINVALUE 1
  MAXVALUE 10000000
  NOCACHE;
  
--------------------------------------------------

-- 평가 등급 테이블 (저장용도)

DROP TABLE RATING;

CREATE TABLE RATING ( 
   REVIEW_NUM NUMBER NOT NULL,
   REVIEW_TYPE VARCHAR2(2) NOT NULL,
   RATING_TYPE VARCHAR2(2) NOT NULL,
   STAR_RANKING  NUMBER DEFAULT '0' NULL,
   REG_ID VARCHAR2(45) NULL ,
   REG_DATE DATE DEFAULT SYSDATE NULL,
   MOD_ID VARCHAR2(45) NULL,
   MOD_DATE DATE NULL 
);

CREATE UNIQUE INDEX RATING_PK ON RATING
(REVIEW_NUM, REVIEW_TYPE, RATING_TYPE, REG_ID)
NOLOGGING;

ALTER TABLE RATING ADD (
  CONSTRAINT RATING_PK
  PRIMARY KEY
  (REVIEW_NUM, REVIEW_TYPE, RATING_TYPE, REG_ID)
  USING INDEX RATING_PK
  ENABLE VALIDATE);

COMMENT ON TABLE RATING IS '좋아요찜별 테이블';
COMMENT ON COLUMN RATING.REVIEW_NUM IS '커뮤니티 후기 고유번호';
COMMENT ON COLUMN RATING.REVIEW_TYPE IS '후기구분값(01:캠핑/글램핑후기, 02:관광지후기)';
COMMENT ON COLUMN RATING.RATING_TYPE IS '구분값(좋아요,찜,별)) ';
COMMENT ON COLUMN RATING.STAR_RANKING IS '별갯수';
COMMENT ON COLUMN RATING.REG_ID IS '등록아이디';
COMMENT ON COLUMN RATING.REG_DATE IS '등록날짜';
COMMENT ON COLUMN RATING.MOD_ID IS '수정아이디';
COMMENT ON COLUMN RATING.MOD_DATE IS '수정날짜';

DROP SEQUENCE RATING_SEQ;
CREATE SEQUENCE RATING_SEQ
  INCREMENT BY 1
  START WITH 1
  MINVALUE 1
  MAXVALUE 10000
  NOCACHE;
  
--------------------------------------------------










------------------------------------------------------
-- 승민님 파트
-- 캠핑장 테이블

DROP SEQUENCE CAMPINGSEQ;
CREATE SEQUENCE CAMPINGSEQ
	INCREMENT BY 1
	START WITH 1
	MINVALUE 1
	MAXVALUE 10000
	NOCACHE;

DROP TABLE CAMPING;

CREATE TABLE CAMPING(
	NUM NUMBER PRIMARY KEY,
	NAME VARCHAR2(100) NOT NULL,
	TYPECODE VARCHAR2(100) NOT NULL, --camptype 이름변경
	THEMECODE VARCHAR2(10) NOT NULL, --관형님과 상의
	TAG VARCHAR2(200) NOT NULL, --reg_keyword 현선님 테이블 참고해 명칭 변경
	SUMMARY VARCHAR2(200),
	IMGURL VARCHAR2(200),
	INTRODUCTION CLOB, --contents
	POSTCODE VARCHAR2(15),
	ADDRESS1 VARCHAR2(150) NOT NULL,
	ADDRESS2 VARCHAR2(150) NOT NULL,
	ADDRESS3 VARCHAR2(150) NOT NULL,
	ADDRESS4 VARCHAR2(150) NOT NULL,
	LATITUDE VARCHAR2(100) NOT NULL,
	LONGITUDE VARCHAR2(100) NOT NULL,
	CONTACT VARCHAR2(30) NOT NULL, --세영 phone 이름 바꾸기
	REGDATE DATE DEFAULT SYSDATE,
	REGID VARCHAR2(50) NOT NULL,
	MODDATE DATE DEFAULT SYSDATE,
	MODID VARCHAR2(50) NOT NULL,
	READCOUNT NUMBER DEFAULT 0,
	UPCOUNT NUMBER DEFAULT 0, --추천수(현선님거 따라서 이름 변경)
	LIKECOUNT NUMBER DEFAULT 0, --찜수(현선님거 따라서 이름 변경)
	REVIEWCOUNT NUMBER DEFAULT 0,
	STARSCORE NUMBER DEFAULT 0 --제거
);

COMMENT ON TABLE CAMPING IS '캠핑장목록테이블';
COMMENT ON COLUMN CAMPING.NUM IS '캠핑장 고유번호';
COMMENT ON COLUMN CAMPING.NAME IS '캠핑장 이름';
COMMENT ON COLUMN CAMPING.TYPECODE IS '캠핑장 유형 구분코드(일반/자동차캠핑장/글램핑/카라반)';
COMMENT ON COLUMN CAMPING.THEMECODE IS '테마(숲/해변/호수,계곡/도심/섬)';
COMMENT ON COLUMN CAMPING.TAG IS '태그(#)'
COMMENT ON COLUMN CAMPING.SUMMARY IS '한줄 요약';
COMMENT ON COLUMN CAMPING.IMGURL IS '대표이미지';
COMMENT ON COLUMN CAMPING.INTRODUCTION IS '소개글';
COMMENT ON COLUMN CAMPING.POSTCODE IS '우편번호';
COMMENT ON COLUMN CAMPING.ADDRESS1 IS '캠핑장주소1(시)';
COMMENT ON COLUMN CAMPING.ADDRESS2 IS '캠핑장주소2(군구)';
COMMENT ON COLUMN CAMPING.ADDRESS3 IS '캠핑장주소3(동길)';
COMMENT ON COLUMN CAMPING.ADDRESS4 IS '캠핑장주소4(상세주소)';
COMMENT ON COLUMN CAMPING.LATITUDE IS '위도';
COMMENT ON COLUMN CAMPING.LONGITUDE IS '경도';
COMMENT ON COLUMN CAMPING.CONTACT IS '캠핑장연락처';
COMMENT ON COLUMN CAMPING.REGDATE IS '등록일';
COMMENT ON COLUMN CAMPING.REGID IS '등록자id';
COMMENT ON COLUMN CAMPING.MODDATE IS '수정일';
COMMENT ON COLUMN CAMPING.MODID IS '수정자id';
COMMENT ON COLUMN CAMPING.READCOUNT IS '조회수';
COMMENT ON COLUMN CAMPING.UPCOUNT IS '추천수';
COMMENT ON COLUMN CAMPING.LIKECOUNT IS '찜갯수';
COMMENT ON COLUMN CAMPING.REVIEWCOUNT IS '리뷰수';
COMMENT ON COLUMN CAMPING.STARSCORE IS '평균별점';

----------------------------------------------------------------------------------------------

-- 캠핑 room 정보 테이블

DROP SEQUENCE ROOMSEQ;
CREATE SEQUENCE ROOMSEQ
	INCREMENT BY 1
	START WITH 1
	MINVALUE 1
	MAXVALUE 10000
	NOCACHE;

DROP TABLE ROOM;

CREATE TABLE ROOM(
	NUM NUMBER PRIMARY KEY,
	NAME VARCHAR2(100) NOT NULL,
	TYPECODE VARCHAR2(20) NOT NULL,
	CNUM NUMBER NOT NULL,
	CNAME VARCHAR2(100) NOT NULL,
	IMGURL VARCHAR2(200),
	DETAILIMG VARCHAR2(600), --이미지 테이블 고유번호
	CONTENTS CLOB,
	PROPGUESTS NUMBER NOT NULL,
	MAXGUESTS NUMBER NOT NULL,
	WEEKDAYPRICE NUMBER NOT NULL,
	WEEKENDPRICE NUMBER NOT NULL,
	OPTIONS VATCHAR2(200), 
	AMENITY VARCHAR2(200),
	BOOKABLEDATE VARCHAR2(100), --일단 고민해보고 이따가 같이 얘기하기
	REGDATE DATE DEFAULT SYSDATE,
	REGID VARCHAR2(50) NOT NULL,
	MODDATE DATE DEFAULT SYSDATE,
	MODID VARCHAR2(50) NOT NULL,
	FOREIGN KEY(CNUM) REFERENCES CAMPING(NUM),
	FOREIGN KEY(CNAME) REFERENCES CAMPING(NAME)
);

COMMENT ON TABLE ROOM IS 'ROOM상세테이블';
COMMENT ON COLUMN ROOM.NUM IS '방 고유번호';
COMMENT ON COLUMN ROOM.NAME IS '방이름';
COMMENT ON COLUMN ROOM.TYPECODE IS '방타입';
COMMENT ON COLUMN ROOM.CNUM IS '캠핑장 고유번호';
COMMENT ON COLUMN ROOM.CNAME IS '캠핑장 이름';
COMMENT ON COLUMN ROOM.IMGURL IS '대표이미지';
COMMENT ON COLUMN ROOM.DETAILIMG IS '상세이미지';
COMMENT ON COLUMN ROOM.CONTENTS IS '상세내용';
COMMENT ON COLUMN ROOM.PROPGUESTS IS '적정인원';
COMMENT ON COLUMN ROOM.MAXGUESTS IS '최대인원';
COMMENT ON COLUMN ROOM.WEEKDAYPRICE IS '주중가격';
COMMENT ON COLUMN ROOM.WEEKENDPRICE IS '주말가격';
COMMENT ON COLUMN ROOM.OPTION IS '시설정보';
COMMENT ON COLUMN ROOM.AMENUTY IS '비품';
COMMENT ON COLUMN ROOM.BOOKABLEDATE IS '예약가능날짜';
COMMENT ON COLUMN ROOM.REGDATE IS '등록일';
COMMENT ON COLUMN ROOM.REGID IS '등록자id';
COMMENT ON COLUMN ROOM.MODDATE IS '수정일';
COMMENT ON COLUMN ROOM.MODID IS '수정자id';


----------------------------------------------------------------------------------------------

-- room 예약관리 테이블(사용자+사업자)

DROP SEQUENCE RESERVSEQ;

CREATE SEQUENCE RESERVSEQ
	INCREMENT BY 1
	START WITH 1
	MINVALUE 1
	MAXVALUE 10000
	NOCACHE;

DROP TABLE RESERVATION;

CREATE TABLE RESERVATION(
	NUM NUMBER PRIMARY KEY,
	CNUM NUMBER NOT NULL,
	RNUM NUMBER NOT NULL,
	id VARCHAR2(20) NOT NULL,
	CHECKINDATE DATE NOT NULL,
	CHECKOUTDATE DATE NOT NULL,
	GUESTS NUMBER NOT NULL,
	NAME VARCHAR2(20),
	PHONE VARCHAR2(20),
	EMAIL VARCHAR2(100),
	REQUESTED CLOB,
	TOTALPRICE NUMBER NOT NULL,
	STATUS VARCHAR2(100),
	FOREIGN KEY(CNUM) REFERENCES CAMPING(NUM),
	FOREIGN KEY(RNUM) REFERENCES ROOM(NUM),
	FOREIGN KEY(id) REFERENCES USERS(id)
);

COMMENT ON TABLE RESERVATION IS 'ROOM예약테이블';
COMMENT ON COLUMN RESERVATION.NUM IS '예약 고유번호';
COMMENT ON COLUMN RESERVATION.CNUM IS '캠핑장 고유번호';
COMMENT ON COLUMN RESERVATION.RNUM IS '방 고유번호';
COMMENT ON COLUMN RESERVATION.id IS '사용자 아이디';
COMMENT ON COLUMN RESERVATION.CHECKINDATE IS '체크인날짜';
COMMENT ON COLUMN RESERVATION.CHECKOUTDATE IS '체크아웃날짜';
COMMENT ON COLUMN RESERVATION.GUESTS IS '이용인원';
COMMENT ON COLUMN RESERVATION.NAME IS '예약자명';
COMMENT ON COLUMN RESERVATION.PHONE IS '전화번호';
COMMENT ON COLUMN RESERVATION.EMAIL IS '이메일';
COMMENT ON COLUMN RESERVATION.REQUESTED IS '요청사항';
COMMENT ON COLUMN RESERVATION.TOTALPRICE IS '총금액';
COMMENT ON COLUMN RESERVATION.STATUS IS '진행상태';