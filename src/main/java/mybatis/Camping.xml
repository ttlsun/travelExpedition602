<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- Camping.xml -->
<mapper namespace="user.camping.model.CampingBean">
	
	<insert id="insertData" parameterType="myCampingBean">
		INSERT INTO CAMPING(
			NUM, NAME, CAMP_TYPE, THEMECODE, REG_KEYWORD, 
			SUMMARY, IMGURL, 
			OPTIONS, CONTENTS,
			POSTCODE, ADDRESS1, ADDRESS2, ADDRESS3, ADDRESS4, 
			LATITUDE, LONGITUDE,
			CONTACT, REGDATE, REGID, MODDATE,
			READCOUNT, RECOMMEND, STEAMED, REVIEWCOUNT,
			STATUS
		)
		VALUES(
			CAMPINGSEQ.NEXTVAL, #{name}, #{camptype}, #{themecode}, #{regkeyword},
			#{summary}, #{imgurl}, 
			#{options}, #{contents},
			#{postcode}, #{address1}, #{address2}, #{address3}, #{address4},
			#{latitude}, #{longitude},
			#{contact}, SYSDATE, #{regid}, SYSDATE,
			0, 0, 0, 0,
			'01'
		)
	</insert>
	
	<select id="getTotalCount" resultType="int">
		SELECT COUNT(*) FROM CAMPING
		WHERE 1=1
		<if test="status == '01'">
			AND STATUS = #{status}
		</if>
		<if test="address1 != null and address1 != ''">
			AND ADDRESS1 = #{address1}
		</if>
		<if test="address2 != null and address2 != ''">
			AND ADDRESS2 = #{address2}
		</if>
		<if test="camptype != null and camptype != ''">
			AND CAMP_TYPE IN(#{camptype})
		</if>
		<if test="themecode != null and themecode != ''">
			AND THEMECODE IN(#{themecode})
		</if>
		<if test="searchName != null and searchName != ''">
			AND NAME LIKE %||#{searchName}||%
		</if>
	</select>
	
	<select id="getCampingList" resultType="myCampingBean">
		SELECT 
			NUM,NAME,CAMP_TYPE,THEMECODE,REG_KEYWORD,
			SUMMARY,IMGURL,OPTIONS,
			POSTCODE,ADDRESS1,ADDRESS2,ADDRESS3,ADDRESS4,
			READCOUNT,RECOMMEND,STEAMED,REVIEWCOUNT,
			(CASE STATUS
					WHEN '01' THEN '노출'
					WHEN '02' THEN '비노출'
			END) AS STATUS 
		FROM CAMPING
		
		
		
	</select>
	
	<select id="getCampingDetail" resultType="myCampingBean">
		SELECT * FROM CAMPING
		WHERE NUM = #{num}
	</select>
	
	<select id="getCampingTypes" resultType="String">
		SELECT CAMP_TYPE FROM CAMPING
		WHERE NUM = #{num}
	</select>
	
	<update id="updateData">
		UPDATE CAMPING
		<set>
			NAME = #{name},
			CAMP_TYPE = #{camptype},
			THEMECODE = #{themecode},
			REG_KEYWORD = #{regkeyword},
			SUMMARY = #{summary},
			IMGURL = #{imgurl},
			OPTIONS = #{options},
			CONTENTS = #{contents},
			POSTCODE = #{postcode},
			ADDRESS1 = #{address1},
			ADDRESS2 = #{address2},
			ADDRESS3 = #{address3},
			ADDRESS4 = #{address4},
			LATITUDE = #{latitude},
			LONGITUDE = #{longitude},
			CONTACT = #{contact},
			MODDATE = SYSDATE,
			MODID = #{modid}
		</set>
		WHERE NUM = #{num}
	</update>
	
</mapper>